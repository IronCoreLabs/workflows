# Test file for rebuild.yaml - validates syntax and matrix expansion
name: Test Rebuild

on:
  workflow_dispatch:
    inputs:
      test_refs:
        type: string
        required: false
        default: '["main"]'
        description: 'JSON array of refs to test'

jobs:
  # Test default usage (single ref)
  test-default:
    uses: ./.github/workflows/rebuild.yaml
    secrets: inherit

  # Test with explicit refs
  test-multi-ref:
    uses: ./.github/workflows/rebuild.yaml
    with:
      refs: ${{ inputs.test_refs }}
    secrets: inherit
